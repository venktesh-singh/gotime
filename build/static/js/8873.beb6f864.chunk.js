"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8873],{38873:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var a=r(1413),t=r(74165),i=r(15861),o=r(70885),s=r(4942),c=r(72791),l=r(36314),d=r(93457),u=r(52791),p=r(57621),m=r(80184),g=(0,d.Z)(p.Z)((function(){return{height:"100%",padding:"20px 24px"}})),h=(0,d.Z)("div")((function(e){return{fontSize:"1.2rem",fontWeight:"500",textTransform:"capitalize",marginBottom:!e.subtitle&&"16px"}})),x=function(e){var n=e.children,r=e.title,a=e.subtitle;e.icon;return(0,m.jsxs)(g,{elevation:6,children:[(0,m.jsx)(h,{subtitle:a,children:r}),a&&(0,m.jsx)(u.Z,{sx:{mb:2},children:a}),n]})},f=r(96285),y=r(36151),Z=r(61889),b=r(92506),v=r(24929),j=r(16030),C=r(74569),k=r.n(C),w=r(40077),A=function(){return function(e){k().get(w._+"/category").then((function(n){e({type:"GET_CAT_LIST",payload:n.data.user})}))}},B=function(e){return function(n){console.log("Redux Category",e);var r=new FormData;r.append("name",e.name),e.image&&r.append("image",e.image),k().post(w._+"/category",r).then((function(e){n({type:"UPDATE_CAT",payload:e.data})})).catch((function(e){console.error("Error adding/updating category:",e)}))}},S=r(19598),T=r(75985),D=r(43954),P=r(67394),F=(r(5462),(0,d.Z)("div")((function(e){var n,r=e.theme;return n={margin:"30px"},(0,s.Z)(n,r.breakpoints.down("sm"),{margin:"16px"}),(0,s.Z)(n,"& .breadcrumb",(0,s.Z)({marginBottom:"30px"},r.breakpoints.down("sm"),{marginBottom:"16px"})),n}))),I=(0,d.Z)("form")((function(){return{paddingLeft:"16px",paddingRight:"16px"}})),_=(0,d.Z)(f.Z)((function(){return{marginBottom:"16px"}})),R=v.Ry().shape({name:v.Z_().required("Category name is required")}),z={name:""},E=function(){var e=(0,j.I0)(),n=(0,S.k6)(),r=(0,c.useState)(null),s=(0,o.Z)(r,2),d=s[0],p=s[1],g=(0,c.useState)(!1),h=(0,o.Z)(g,2),f=h[0],v=h[1],C=(0,D.uI)({accept:"image/*",onDrop:function(e){p(e[0]),v(!1)}}),k=C.getRootProps,w=C.getInputProps,E=C.isDragActive,O=function(){var r=(0,i.Z)((0,t.Z)().mark((function r(a){var i;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(i=new FormData).append("name",a.name),console.log("Selected File:",d),d?i.append("image",d):console.log("No file selected"),{headers:{"Content-Type":"multipart/form-data"}},v(!0),r.prev=6,r.next=9,e(B(i));case 9:T.Am.success("Category Added Successfully!",{}),e(A()),n.push("/category/category-list"),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(6),console.error("Error adding category:",r.t0),T.Am.error("Failed to add category. Please try again later.",{});case 18:return r.prev=18,v(!1),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[6,14,18,21]])})));return function(e){return r.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(T.Ix,{position:"top-center",theme:"colored",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,m.jsxs)(F,{children:[(0,m.jsxs)(y.Z,{sx:{mb:2,pl:1},variant:"contained",color:"primary",onClick:function(){n.goBack()},children:[(0,m.jsx)(P.Z,{"aria-label":"ArrowBackIcon","aria-haspopup":"true"}),"Back"]}),(0,m.jsx)(l.Z,{spacing:3,children:(0,m.jsx)(x,{title:"Add New Category",children:(0,m.jsx)(b.J9,{onSubmit:O,enableReinitialize:!0,initialValues:z,validationSchema:R,children:function(e){var n=e.values,r=e.errors,t=e.touched,i=e.handleChange,o=e.handleBlur,s=e.handleSubmit;return(0,m.jsxs)(I,{onSubmit:s,children:[(0,m.jsx)(Z.ZP,{container:!0,spacing:3,children:(0,m.jsxs)(Z.ZP,{item:!0,sm:6,xs:12,children:[(0,m.jsx)(_,{fullWidth:!0,name:"name",label:"Category Name",size:"small",variant:"outlined",onBlur:o,onChange:i,value:n.name||"",error:Boolean(t.name&&r.name),helperText:t.name&&r.name}),(0,m.jsx)(u.Z,{flex:1,children:(0,m.jsxs)("div",(0,a.Z)((0,a.Z)({style:{border:"2px dashed #aaa",padding:"12px",textAlign:"center"}},k()),{},{children:[(0,m.jsx)("input",(0,a.Z)({type:"file",name:"image"},w())),E?(0,m.jsx)("p",{children:"Drop the image file here ..."}):(0,m.jsx)("b",{children:"Drag and drop an image file here, or click to select file"})]}))})]})}),(0,m.jsx)(y.Z,{type:"submit",color:"primary",variant:"contained",sx:{mb:2,px:4},disabled:f,style:{marginTop:"10px"},children:f?"Uploading...":"Add Category"})]})}})})})]})]})}}}]);
//# sourceMappingURL=8873.beb6f864.chunk.js.map